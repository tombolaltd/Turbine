FROM skobow/docker-gradle-git

# Create app directory
RUN mkdir -p /app
WORKDIR /app

# Bundle app source
RUN git clone -b arcade/PU-2799_stats_for_proxy https://github.com/tombolaltd/Turbine.git

WORKDIR /app/Turbine
RUN ./gradlew fatJar

EXPOSE 8989

ENTRYPOINT java -jar turbine-core/build/libs/turbine-core-all-2.0.0-DP.3-SNAPSHOT.jar -port 8989 -streams http://gateway:8080/hystrix.stream